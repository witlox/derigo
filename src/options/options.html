<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Derigo Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="options-container">
    <header class="options-header">
      <h1>Derigo Settings</h1>
      <p>Configure content filtering and analysis preferences</p>
    </header>

    <main class="options-main">
      <!-- General Settings -->
      <section class="settings-section">
        <h2>General</h2>

        <div class="setting-item">
          <div class="setting-info">
            <label for="enabled">Extension Enabled</label>
            <p>Enable or disable content analysis</p>
          </div>
          <div class="setting-control">
            <input type="checkbox" id="enabled" class="toggle">
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label for="display-mode">Display Mode</label>
            <p>How to display analysis results and warnings</p>
          </div>
          <div class="setting-control">
            <select id="display-mode">
              <option value="badge">Badge - Non-intrusive indicator</option>
              <option value="overlay">Overlay - Dismissible warning</option>
              <option value="block">Block - Full page block</option>
              <option value="off">Off - No visual display</option>
            </select>
          </div>
        </div>
      </section>

      <!-- Political Filters -->
      <section class="settings-section">
        <h2>Political Filters</h2>
        <p class="section-desc">Set acceptable ranges for each political axis. Content outside these ranges will trigger the display mode action.</p>

        <div class="filter-item">
          <div class="filter-header">
            <label>
              <input type="checkbox" id="economic-enabled">
              Economic Axis
            </label>
            <span class="filter-range" id="economic-range-display">All allowed</span>
          </div>
          <div class="filter-slider" id="economic-slider-container">
            <span class="slider-label-left">Left</span>
            <div class="dual-slider">
              <input type="range" id="economic-min" min="-100" max="100" value="-100">
              <input type="range" id="economic-max" min="-100" max="100" value="100">
            </div>
            <span class="slider-label-right">Right</span>
          </div>
        </div>

        <div class="filter-item">
          <div class="filter-header">
            <label>
              <input type="checkbox" id="social-enabled">
              Social Axis
            </label>
            <span class="filter-range" id="social-range-display">All allowed</span>
          </div>
          <div class="filter-slider" id="social-slider-container">
            <span class="slider-label-left">Progressive</span>
            <div class="dual-slider">
              <input type="range" id="social-min" min="-100" max="100" value="-100">
              <input type="range" id="social-max" min="-100" max="100" value="100">
            </div>
            <span class="slider-label-right">Conservative</span>
          </div>
        </div>

        <div class="filter-item">
          <div class="filter-header">
            <label>
              <input type="checkbox" id="authority-enabled">
              Authority Axis
            </label>
            <span class="filter-range" id="authority-range-display">All allowed</span>
          </div>
          <div class="filter-slider" id="authority-slider-container">
            <span class="slider-label-left">Libertarian</span>
            <div class="dual-slider">
              <input type="range" id="authority-min" min="-100" max="100" value="-100">
              <input type="range" id="authority-max" min="-100" max="100" value="100">
            </div>
            <span class="slider-label-right">Authoritarian</span>
          </div>
        </div>

        <div class="filter-item">
          <div class="filter-header">
            <label>
              <input type="checkbox" id="globalism-enabled">
              Globalism Axis
            </label>
            <span class="filter-range" id="globalism-range-display">All allowed</span>
          </div>
          <div class="filter-slider" id="globalism-slider-container">
            <span class="slider-label-left">Nationalist</span>
            <div class="dual-slider">
              <input type="range" id="globalism-min" min="-100" max="100" value="-100">
              <input type="range" id="globalism-max" min="-100" max="100" value="100">
            </div>
            <span class="slider-label-right">Globalist</span>
          </div>
        </div>
      </section>

      <!-- Truthfulness Filter -->
      <section class="settings-section">
        <h2>Truthfulness Filter</h2>

        <div class="setting-item">
          <div class="setting-info">
            <label for="truth-threshold">Minimum Truthfulness Score</label>
            <p>Content below this score will trigger the display mode action</p>
          </div>
          <div class="setting-control slider-control">
            <input type="range" id="truth-threshold" min="0" max="100" value="0">
            <span id="truth-threshold-value">0%</span>
          </div>
        </div>
      </section>

      <!-- Author Filters -->
      <section class="settings-section">
        <h2>Author Filters</h2>
        <p class="section-desc">Filter content based on detected author characteristics. These filters analyze author behavior patterns to identify potential bots, trolls, and coordinated campaigns.</p>

        <div class="setting-item">
          <div class="setting-info">
            <label for="min-authenticity">Minimum Authenticity Score</label>
            <p>Filter out authors below this authenticity level (0 = bot-like, 100 = human)</p>
          </div>
          <div class="setting-control slider-control">
            <input type="range" id="min-authenticity" min="0" max="100" value="0">
            <span id="min-authenticity-value">0%</span>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label for="max-coordination">Maximum Coordination Score</label>
            <p>Filter out authors above this coordination level (0 = organic, 100 = orchestrated)</p>
          </div>
          <div class="setting-control slider-control">
            <input type="range" id="max-coordination" min="0" max="100" value="100">
            <span id="max-coordination-value">100%</span>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label>Block Author Intent Types</label>
            <p>Block content from authors classified as these types</p>
          </div>
          <div class="setting-control checkboxes">
            <label class="checkbox-label">
              <input type="checkbox" id="block-troll">
              <span class="checkbox-text">Trolls</span>
              <span class="checkbox-desc">Accounts primarily seeking to provoke</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="block-bot">
              <span class="checkbox-text">Bots</span>
              <span class="checkbox-desc">Automated accounts</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="block-state-sponsored">
              <span class="checkbox-text">State-Sponsored</span>
              <span class="checkbox-desc">Government influence operations</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="block-commercial">
              <span class="checkbox-text">Commercial</span>
              <span class="checkbox-desc">Promotional/advertising accounts</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="block-activist">
              <span class="checkbox-text">Activists</span>
              <span class="checkbox-desc">Organized advocacy accounts</span>
            </label>
          </div>
        </div>
      </section>

      <!-- External APIs -->
      <section class="settings-section">
        <h2>External APIs</h2>
        <div class="warning-box">
          <strong>Privacy Notice:</strong> All external API integrations are disabled by default. Enabling them will send some page content to third-party services. You must provide your own API keys.
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label for="allow-external">Allow External API Calls</label>
            <p>Master switch for all external API integrations</p>
          </div>
          <div class="setting-control">
            <input type="checkbox" id="allow-external" class="toggle">
          </div>
        </div>

        <div class="api-section" id="api-settings" style="display: none;">
          <!-- AI Classification -->
          <div class="api-item">
            <h3>AI Classification</h3>
            <p>Use AI models for enhanced content analysis</p>

            <div class="api-setting">
              <label>
                <input type="checkbox" id="ai-enabled">
                Enable AI Classification
              </label>
            </div>

            <div class="api-setting">
              <label for="ai-provider">Provider</label>
              <select id="ai-provider">
                <option value="openai">OpenAI (ChatGPT)</option>
                <option value="anthropic">Anthropic (Claude)</option>
                <option value="google">Google (Gemini)</option>
              </select>
            </div>

            <div class="api-setting">
              <label for="ai-key">API Key</label>
              <input type="password" id="ai-key" placeholder="Enter your API key">
            </div>

            <div class="api-setting">
              <label for="ai-confidence">Auto-analyze threshold</label>
              <input type="range" id="ai-confidence" min="0" max="100" value="70">
              <span id="ai-confidence-value">70%</span>
            </div>
          </div>

          <!-- Fact Check -->
          <div class="api-item">
            <h3>Fact Check API</h3>
            <p>Query Google Fact Check Tools for claim verification</p>

            <div class="api-setting">
              <label>
                <input type="checkbox" id="factcheck-enabled">
                Enable Fact Check
              </label>
            </div>

            <div class="api-setting">
              <label for="factcheck-key">API Key</label>
              <input type="password" id="factcheck-key" placeholder="Enter your API key">
            </div>
          </div>
        </div>
      </section>

      <!-- Site Profiles -->
      <section class="settings-section">
        <h2>Site Profiles</h2>
        <p class="section-desc">Create custom filter profiles for different types of sites. Assign domains to profiles to override global settings.</p>

        <div id="profiles-container">
          <div id="profile-list"></div>
          <button id="create-profile-btn" class="btn btn-primary">+ Create Profile</button>
        </div>
      </section>

      <!-- Profile Editor Modal -->
      <div id="profile-modal" class="modal" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="modal-title">Create Profile</h3>
            <button class="modal-close" id="modal-close">&times;</button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="profile-name">Profile Name</label>
              <input type="text" id="profile-name" placeholder="e.g., News Sites">
            </div>
            <div class="form-group">
              <label for="profile-description">Description (optional)</label>
              <input type="text" id="profile-description" placeholder="e.g., Mainstream news outlets">
            </div>

            <div class="form-group">
              <label>Domains</label>
              <div id="profile-domains" class="domain-list"></div>
              <div class="domain-add">
                <input type="text" id="profile-domain-input" placeholder="example.com">
                <button id="profile-add-domain-btn" class="btn btn-small">Add</button>
              </div>
            </div>

            <h4>Filter Overrides</h4>
            <p class="override-desc">Check to override global settings for this profile. Unchecked items use global defaults.</p>

            <div class="override-item">
              <label>
                <input type="checkbox" id="override-display-mode">
                Display Mode
              </label>
              <select id="profile-display-mode" disabled>
                <option value="badge">Badge</option>
                <option value="overlay">Overlay</option>
                <option value="block">Block</option>
                <option value="off">Off</option>
                <option value="disabled">Disabled (Skip Analysis)</option>
              </select>
            </div>

            <div class="override-item">
              <label>
                <input type="checkbox" id="override-truth-score">
                Min Truth Score
              </label>
              <input type="range" id="profile-truth-score" min="0" max="100" value="0" disabled>
              <span id="profile-truth-score-value">0%</span>
            </div>

            <div class="override-item">
              <label>
                <input type="checkbox" id="override-authenticity">
                Min Authenticity
              </label>
              <input type="range" id="profile-authenticity" min="0" max="100" value="0" disabled>
              <span id="profile-authenticity-value">0%</span>
            </div>

            <div class="override-item">
              <label>
                <input type="checkbox" id="override-coordination">
                Max Coordination
              </label>
              <input type="range" id="profile-coordination" min="0" max="100" value="100" disabled>
              <span id="profile-coordination-value">100%</span>
            </div>

            <div class="override-item">
              <label>
                <input type="checkbox" id="override-blocked-intents">
                Blocked Intents
              </label>
              <div id="profile-blocked-intents" class="checkboxes-inline">
                <label><input type="checkbox" id="profile-block-troll" disabled> Troll</label>
                <label><input type="checkbox" id="profile-block-bot" disabled> Bot</label>
                <label><input type="checkbox" id="profile-block-state" disabled> State-Sponsored</label>
                <label><input type="checkbox" id="profile-block-commercial" disabled> Commercial</label>
                <label><input type="checkbox" id="profile-block-activist" disabled> Activist</label>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button id="profile-delete-btn" class="btn btn-danger" style="display: none;">Delete</button>
            <div class="modal-actions">
              <button id="profile-cancel-btn" class="btn btn-secondary">Cancel</button>
              <button id="profile-save-btn" class="btn btn-primary">Save</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Data Management -->
      <section class="settings-section">
        <h2>Data Management</h2>

        <div class="setting-item">
          <div class="setting-info">
            <label>Clear Classification Cache</label>
            <p>Remove all cached classification results</p>
          </div>
          <div class="setting-control">
            <button id="clear-cache" class="btn btn-secondary">Clear Cache</button>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label>Reset All Settings</label>
            <p>Restore all settings to defaults</p>
          </div>
          <div class="setting-control">
            <button id="reset-settings" class="btn btn-danger">Reset</button>
          </div>
        </div>
      </section>
    </main>

    <footer class="options-footer">
      <p>Derigo v1.0.0</p>
    </footer>
  </div>

  <script src="options.js" type="module"></script>
</body>
</html>
